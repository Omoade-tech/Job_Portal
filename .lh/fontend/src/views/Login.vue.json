{
    "sourceFile": "fontend/src/views/Login.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1736497446863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736499201565,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,8 +154,9 @@\n           password: this.password,\r\n           remember: this.rememberMe\r\n         });\r\n \r\n+        \\\r\n         if (response.data.success) {\r\n           // Store user data and token\r\n           localStorage.setItem('user', JSON.stringify(response.data.data));\r\n           if (response.data.token) {\r\n"
                },
                {
                    "date": 1736499212407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,9 +154,8 @@\n           password: this.password,\r\n           remember: this.rememberMe\r\n         });\r\n \r\n-        \\\r\n         if (response.data.success) {\r\n           // Store user data and token\r\n           localStorage.setItem('user', JSON.stringify(response.data.data));\r\n           if (response.data.token) {\r\n"
                },
                {
                    "date": 1736503581393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,28 +179,28 @@\n         this.isLoading = false;\r\n       }\r\n     },\r\n     handleError(error) {\r\n-      if (error.response) {\r\n-        switch (error.response.status) {\r\n-          case 422:\r\n-            const errors = error.response.data.errors;\r\n-            if (errors.email) this.emailError = errors.email[0];\r\n-            if (errors.password) this.passwordError = errors.password[0];\r\n-            break;\r\n-          case 401:\r\n-            this.error = 'Invalid email or password';\r\n-            break;\r\n-          default:\r\n-            this.error = error.response.data.message || 'An error occurred. Please try again.';\r\n-        }\r\n-      } else if (error.request) {\r\n-        this.error = 'Network error. Please check your connection.';\r\n-      } else {\r\n-        this.error = 'An unexpected error occurred. Please try again.';\r\n-      }\r\n+  if (error.response) {\r\n+    switch (error.response.status) {\r\n+      case 422:\r\n+        const errors = error.response.data.errors;\r\n+        if (errors.email) this.emailError = errors.email[0];\r\n+        if (errors.password) this.passwordError = errors.password[0];\r\n+        break;\r\n+      case 401:\r\n+        this.error = 'Invalid email or password';\r\n+        break;\r\n+      default:\r\n+        this.error = error.response.data.message || 'An unexpected error occurred. Please try again.';\r\n     }\r\n+  } else if (error.request) {\r\n+    this.error = 'Network error. Please check your connection.';\r\n+  } else {\r\n+    this.error = 'An unexpected error occurred. Please try again.';\r\n   }\r\n+}\r\n+  }\r\n };\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1736503603778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,28 +179,28 @@\n         this.isLoading = false;\r\n       }\r\n     },\r\n     handleError(error) {\r\n-  if (error.response) {\r\n-    switch (error.response.status) {\r\n-      case 422:\r\n-        const errors = error.response.data.errors;\r\n-        if (errors.email) this.emailError = errors.email[0];\r\n-        if (errors.password) this.passwordError = errors.password[0];\r\n-        break;\r\n-      case 401:\r\n-        this.error = 'Invalid email or password';\r\n-        break;\r\n-      default:\r\n-        this.error = error.response.data.message || 'An unexpected error occurred. Please try again.';\r\n+      if (error.response) {\r\n+        switch (error.response.status) {\r\n+          case 422:\r\n+            const errors = error.response.data.errors;\r\n+            if (errors.email) this.emailError = errors.email[0];\r\n+            if (errors.password) this.passwordError = errors.password[0];\r\n+            break;\r\n+          case 401:\r\n+            this.error = 'Invalid email or password';\r\n+            break;\r\n+          default:\r\n+            this.error = error.response.data.message || 'An error occurred. Please try again.';\r\n+        }\r\n+      } else if (error.request) {\r\n+        this.error = 'Network error. Please check your connection.';\r\n+      } else {\r\n+        this.error = 'An unexpected error occurred. Please try again.';\r\n+      }\r\n     }\r\n-  } else if (error.request) {\r\n-    this.error = 'Network error. Please check your connection.';\r\n-  } else {\r\n-    this.error = 'An unexpected error occurred. Please try again.';\r\n   }\r\n-}\r\n-  }\r\n };\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1736503939860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,28 +179,34 @@\n         this.isLoading = false;\r\n       }\r\n     },\r\n     handleError(error) {\r\n-      if (error.response) {\r\n-        switch (error.response.status) {\r\n-          case 422:\r\n-            const errors = error.response.data.errors;\r\n-            if (errors.email) this.emailError = errors.email[0];\r\n-            if (errors.password) this.passwordError = errors.password[0];\r\n-            break;\r\n-          case 401:\r\n-            this.error = 'Invalid email or password';\r\n-            break;\r\n-          default:\r\n-            this.error = error.response.data.message || 'An error occurred. Please try again.';\r\n-        }\r\n-      } else if (error.request) {\r\n-        this.error = 'Network error. Please check your connection.';\r\n-      } else {\r\n-        this.error = 'An unexpected error occurred. Please try again.';\r\n+  if (error.response) {\r\n+    if (error.response.data.success === true) {\r\n+      // Handle successful response\r\n+      this.error = '';\r\n+      this.$router.push({ name: 'dashboard' });\r\n+    } else {\r\n+      switch (error.response.status) {\r\n+        case 422:\r\n+          const errors = error.response.data.errors;\r\n+          if (errors.email) this.emailError = errors.email[0];\r\n+          if (errors.password) this.passwordError = errors.password[0];\r\n+          break;\r\n+        case 401:\r\n+          this.error = 'Invalid email or password';\r\n+          break;\r\n+        default:\r\n+          this.error = error.response.data.message || 'An unexpected error occurred. Please try again.';\r\n       }\r\n     }\r\n+  } else if (error.request) {\r\n+    this.error = 'Network error. Please check your connection.';\r\n+  } else {\r\n+    this.error = 'An unexpected error occurred. Please try again.';\r\n   }\r\n+}\r\n+  }\r\n };\r\n </script>\r\n \r\n <style scoped>\r\n"
                },
                {
                    "date": 1736504076109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,28 +179,38 @@\n         this.isLoading = false;\r\n       }\r\n     },\r\n     handleError(error) {\r\n-      if (error.response) {\r\n-        switch (error.response.status) {\r\n-          case 422:\r\n-            const errors = error.response.data.errors;\r\n-            if (errors.email) this.emailError = errors.email[0];\r\n-            if (errors.password) this.passwordError = errors.password[0];\r\n-            break;\r\n-          case 401:\r\n-            this.error = 'Invalid email or password';\r\n-            break;\r\n-          default:\r\n-            this.error = error.response.data.message || 'An error occurred. Please try again.';\r\n-        }\r\n-      } else if (error.request) {\r\n-        this.error = 'Network error. Please check your connection.';\r\n-      } else {\r\n-        this.error = 'An unexpected error occurred. Please try again.';\r\n+  if (error.response) {\r\n+    if (error.response.status === 204) {\r\n+      // Handle successful response with no content\r\n+      this.error = '';\r\n+      this.$router.push({ name: 'dashboard' });\r\n+    } else if (error.response.data.success === true) {\r\n+      // Handle successful response\r\n+      this.error = '';\r\n+      this.$router.push({ name: 'dashboard' });\r\n+    } else {\r\n+      switch (error.response.status) {\r\n+        case 422:\r\n+          const errors = error.response.data.errors;\r\n+          if (errors.email) this.emailError = errors.email[0];\r\n+          if (errors.password) this.passwordError = errors.password[0];\r\n+          break;\r\n+        case 401:\r\n+          this.error = 'Invalid email or password';\r\n+          break;\r\n+        default:\r\n+          this.error = error.response.data.message || 'An unexpected error occurred. Please try again.';\r\n       }\r\n     }\r\n+  } else if (error.request) {\r\n+    this.error = 'Network error. Please check your connection.';\r\n+  } else {\r\n+    this.error = 'An unexpected error occurred. Please try again.';\r\n   }\r\n+}\r\n+  }\r\n };\r\n </script>\r\n \r\n <style scoped>\r\n"
                }
            ],
            "date": 1736497446863,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"login-container d-flex justify-content-center align-items-center min-vh-100\">\r\n    <div class=\"card p-4\" style=\"max-width: 400px; width: 100%;\">\r\n      <!-- Header -->\r\n      <h2 class=\"text-center mb-4\">Login</h2>\r\n\r\n      <!-- Alert Messages -->\r\n      <div v-if=\"error\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n        {{ error }}\r\n        <button type=\"button\" class=\"btn-close\" @click=\"error = ''\"></button>\r\n      </div>\r\n\r\n      <form @submit.prevent=\"handleLogin\">\r\n        <!-- Email Input -->\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <div class=\"input-group\">\r\n            <span class=\"input-group-text\">\r\n              <i class=\"bi bi-envelope\"></i>\r\n            </span>\r\n            <input \r\n              type=\"email\" \r\n              id=\"email\" \r\n              v-model=\"email\" \r\n              class=\"form-control\" \r\n              :class=\"{ 'is-invalid': emailError }\"\r\n              placeholder=\"Enter your email\" \r\n              required \r\n              @input=\"clearErrors\"\r\n            />\r\n            <div class=\"invalid-feedback\">{{ emailError }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Password Input -->\r\n        <div class=\"mb-3\">\r\n          <label for=\"password\" class=\"form-label\">Password</label>\r\n          <div class=\"input-group\">\r\n            <span class=\"input-group-text\">\r\n              <i class=\"bi bi-lock\"></i>\r\n            </span>\r\n            <input \r\n              :type=\"showPassword ? 'text' : 'password'\" \r\n              id=\"password\" \r\n              v-model=\"password\" \r\n              class=\"form-control\" \r\n              :class=\"{ 'is-invalid': passwordError }\"\r\n              placeholder=\"Enter your password\" \r\n              required \r\n              @input=\"clearErrors\"\r\n            />\r\n            <button \r\n              class=\"btn btn-outline-secondary\" \r\n              type=\"button\"\r\n              @click=\"togglePassword\"\r\n            >\r\n              <i :class=\"showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'\"></i>\r\n            </button>\r\n            <div class=\"invalid-feedback\">{{ passwordError }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Remember Me Checkbox -->\r\n        <div class=\"mb-3 form-check\">\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"form-check-input\" \r\n            id=\"rememberMe\" \r\n            v-model=\"rememberMe\"\r\n          >\r\n          <label class=\"form-check-label\" for=\"rememberMe\">Remember me</label>\r\n        </div>\r\n\r\n        <!-- Submit Button -->\r\n        <button \r\n          type=\"submit\" \r\n          class=\"btn btn-primary w-100 mb-3\" \r\n          :disabled=\"isLoading\"\r\n        >\r\n          <span v-if=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n          {{ isLoading ? 'Logging in...' : 'Login' }}\r\n        </button>\r\n\r\n        <!-- Register Link -->\r\n        <div class=\"text-center\">\r\n          <span class=\"text-muted\">Don't have an account? </span>\r\n          <router-link to=\"/signup\" class=\"text-primary text-decoration-none\">\r\n            Register here\r\n          </router-link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/services/api.js';\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  data() {\r\n    return {\r\n      email: '',\r\n      password: '',\r\n      error: '',\r\n      emailError: '',\r\n      passwordError: '',\r\n      isLoading: false,\r\n      showPassword: false,\r\n      rememberMe: false\r\n    };\r\n  },\r\n  methods: {\r\n    clearErrors() {\r\n      this.error = '';\r\n      this.emailError = '';\r\n      this.passwordError = '';\r\n    },\r\n    togglePassword() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n    validateForm() {\r\n      let isValid = true;\r\n      this.clearErrors();\r\n\r\n      if (!this.email) {\r\n        this.emailError = 'Email is required';\r\n        isValid = false;\r\n      } else if (!this.isValidEmail(this.email)) {\r\n        this.emailError = 'Please enter a valid email address';\r\n        isValid = false;\r\n      }\r\n\r\n      if (!this.password) {\r\n        this.passwordError = 'Password is required';\r\n        isValid = false;\r\n      }\r\n\r\n      return isValid;\r\n    },\r\n    isValidEmail(email) {\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      return emailRegex.test(email);\r\n    },\r\n    async handleLogin() {\r\n      if (!this.validateForm()) return;\r\n\r\n      this.isLoading = true;\r\n      this.clearErrors();\r\n\r\n      try {\r\n        const response = await api.login({\r\n          email: this.email,\r\n          password: this.password,\r\n          remember: this.rememberMe\r\n        });\r\n\r\n        if (response.data.success) {\r\n          // Store user data and token\r\n          localStorage.setItem('user', JSON.stringify(response.data.data));\r\n          if (response.data.token) {\r\n            localStorage.setItem('token', response.data.token);\r\n          }\r\n\r\n          const userRole = response.data.data.role;\r\n          const roleRoutes = {\r\n            admin: 'adminDashboard',\r\n            employer: 'employerDashboard',\r\n            job_seeker: 'jobseekerDashboard'\r\n          };\r\n\r\n          await this.$router.push({ \r\n            name: roleRoutes[userRole] || '/' \r\n          });\r\n        }\r\n      } catch (error) {\r\n        this.handleError(error);\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    handleError(error) {\r\n      if (error.response) {\r\n        switch (error.response.status) {\r\n          case 422:\r\n            const errors = error.response.data.errors;\r\n            if (errors.email) this.emailError = errors.email[0];\r\n            if (errors.password) this.passwordError = errors.password[0];\r\n            break;\r\n          case 401:\r\n            this.error = 'Invalid email or password';\r\n            break;\r\n          default:\r\n            this.error = error.response.data.message || 'An error occurred. Please try again.';\r\n        }\r\n      } else if (error.request) {\r\n        this.error = 'Network error. Please check your connection.';\r\n      } else {\r\n        this.error = 'An unexpected error occurred. Please try again.';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.card {\r\n  border: none;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.input-group-text {\r\n  background-color: transparent;\r\n  border-right: none;\r\n}\r\n\r\n.input-group .form-control {\r\n  border-left: none;\r\n}\r\n\r\n.input-group .form-control:focus {\r\n  border-left: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.btn-outline-secondary {\r\n  border-left: none;\r\n}\r\n\r\n.btn-outline-secondary:focus {\r\n  box-shadow: none;\r\n}\r\n\r\n.form-check-input:checked {\r\n  background-color: #0d6efd;\r\n  border-color: #0d6efd;\r\n}\r\n\r\n.invalid-feedback {\r\n  display: block;\r\n}\r\n\r\n/* Animation for loading spinner */\r\n.spinner-border {\r\n  width: 1rem;\r\n  height: 1rem;\r\n  border-width: 0.15em;\r\n}\r\n</style>\r\n"
        }
    ]
}